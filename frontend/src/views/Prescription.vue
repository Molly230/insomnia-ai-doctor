<template>
  <div class="prescription">
    <el-card class="prescription-card" shadow="hover">
      <template #header>
        <div class="card-header">
          <el-icon><Medicine /></el-icon>
          <span>ä¸ªæ€§åŒ–æ²»ç–—æ–¹æ¡ˆ</span>
        </div>
      </template>

      <!-- è¯å‹æ‘˜è¦ -->
      <div class="syndrome-summary">
        <el-alert
          title="è¯Šæ–­è¯å‹ï¼šå¿ƒè‚¾ä¸äº¤å‹å¤±çœ "
          type="info"
          :closable="false"
          show-icon
        >
          <template #default>
            <p>ç—…æœºï¼šå¿ƒç«ä¸Šç‚ï¼Œè‚¾æ°´ä¸æµï¼Œå¿ƒç¥å¤±å…»è€Œä¸å¯</p>
            <p>æ²»åˆ™ï¼šæ»‹é˜´é™ç«ï¼Œäº¤é€šå¿ƒè‚¾ï¼Œå…»å¿ƒå®‰ç¥</p>
          </template>
        </el-alert>
      </div>

      <!-- ä¸­è¯æ–¹å‰‚ -->
      <div class="treatment-section">
        <h2 class="section-title">
          <el-icon><Grape /></el-icon>
          ä¸­è¯è°ƒç†æ–¹æ¡ˆ
        </h2>
        
        <el-card class="formula-card" shadow="hover">
          <h3>é»„è¿é˜¿èƒ¶æ±¤åŠ å‡</h3>
          
          <el-table :data="herbalFormula" style="width: 100%">
            <el-table-column prop="herb" label="è¯æ" width="120" />
            <el-table-column prop="dosage" label="ç”¨é‡" width="80" />
            <el-table-column prop="effects" label="åŠŸæ•ˆ" />
          </el-table>

          <div class="formula-instructions">
            <h4>ğŸ“‹ æœç”¨æ–¹æ³•</h4>
            <ul>
              <li><strong>ç…ç…®æ–¹æ³•</strong>ï¼šæ°´ç…æœï¼Œå…ˆç…30åˆ†é’Ÿ</li>
              <li><strong>æœç”¨å‰‚é‡</strong>ï¼šæ¯æ—¥ä¸€å‰‚ï¼Œåˆ†æ—©æ™šä¸¤æ¬¡æœç”¨</li>
              <li><strong>æœç”¨æ—¶é—´</strong>ï¼šé¥­å30åˆ†é’Ÿï¼Œç¡å‰2å°æ—¶</li>
              <li><strong>ç–—ç¨‹å»ºè®®</strong>ï¼šè¿ç»­æœç”¨2-4å‘¨ï¼Œæ ¹æ®ç—‡çŠ¶è°ƒæ•´</li>
            </ul>
          </div>
        </el-card>
      </div>

      <!-- å¤–æ²»ç–—æ³• -->
      <div class="treatment-section">
        <h2 class="section-title">
          <el-icon><Connection /></el-icon>
          å¤–æ²»ç–—æ³•
        </h2>

        <el-row :gutter="20">
          <el-col :xs="24" :md="12">
            <el-card class="therapy-card" shadow="hover">
              <h3>ğŸ–ï¸ ç©´ä½æŒ‰æ‘©</h3>
              <div class="therapy-content">
                <p><strong>ä¸»è¦ç©´ä½ï¼š</strong>ç¥é—¨ã€å¿ƒä¿ã€è‚¾ä¿ã€ä¸‰é˜´äº¤ã€æ¶Œæ³‰</p>
                <p><strong>æ‰‹æ³•ï¼š</strong>æŒ‡è…¹æŒ‰æ‰ï¼ŒåŠ›åº¦é€‚ä¸­</p>
                <p><strong>æ—¶é—´ï¼š</strong>æ¯ç©´æŒ‰å‹1-2åˆ†é’Ÿ</p>
                <p><strong>é¢‘ç‡ï¼š</strong>æ¯æ—¥ç¡å‰30åˆ†é’Ÿ</p>
                <p><strong>åŠŸæ•ˆï¼š</strong>å®å¿ƒå®‰ç¥ï¼Œè°ƒç†æ°”è¡€</p>
              </div>
            </el-card>
          </el-col>
          
          <el-col :xs="24" :md="12">
            <el-card class="therapy-card" shadow="hover">
              <h3>ğŸ› è¯æµ´è¶³ç–—</h3>
              <div class="therapy-content">
                <p><strong>é…æ–¹ï¼š</strong>é…¸æ£ä»30gã€å¤œäº¤è—¤30gã€åˆæ¬¢èŠ±15g</p>
                <p><strong>æ–¹æ³•ï¼š</strong>ç…ç…®å–æ±ï¼Œæ¸©åº¦40-42â„ƒ</p>
                <p><strong>æ—¶é—´ï¼š</strong>æµ¸æ³¡20-30åˆ†é’Ÿ</p>
                <p><strong>é¢‘ç‡ï¼š</strong>æ¯æ—¥ç¡å‰1å°æ—¶</p>
                <p><strong>åŠŸæ•ˆï¼š</strong>æ¸©ç»é€šç»œï¼Œå®‰ç¥åŠ©çœ </p>
              </div>
            </el-card>
          </el-col>
        </el-row>
      </div>

      <!-- é£Ÿç–—è°ƒç† -->
      <div class="treatment-section">
        <h2 class="section-title">
          <el-icon><Bowl /></el-icon>
          é£Ÿç–—è°ƒç†æ–¹æ¡ˆ
        </h2>

        <el-row :gutter="20">
          <el-col :xs="24" :md="8" v-for="recipe in dietRecipes" :key="recipe.name">
            <el-card class="recipe-card" shadow="hover">
              <h3>{{ recipe.icon }} {{ recipe.name }}</h3>
              <div class="recipe-content">
                <p><strong>ææ–™ï¼š</strong>{{ recipe.ingredients }}</p>
                <p><strong>åˆ¶ä½œï¼š</strong>{{ recipe.method }}</p>
                <p><strong>ç”¨æ³•ï¼š</strong>{{ recipe.usage }}</p>
                <p><strong>åŠŸæ•ˆï¼š</strong>{{ recipe.effects }}</p>
              </div>
            </el-card>
          </el-col>
        </el-row>
      </div>

      <!-- ç”Ÿæ´»è°ƒå…» -->
      <div class="treatment-section">
        <h2 class="section-title">
          <el-icon><Sunny /></el-icon>
          ç”Ÿæ´»è°ƒå…»å»ºè®®
        </h2>

        <el-card class="lifestyle-card" shadow="hover">
          <el-row :gutter="30">
            <el-col :xs="24" :md="12">
              <h3>ğŸŒ™ ç¡çœ å«ç”Ÿ</h3>
              <ul class="lifestyle-list">
                <li>è§„å¾‹ä½œæ¯ï¼Œæ™šä¸Š10ç‚¹å‰å…¥ç¡</li>
                <li>å§å®¤ç¯å¢ƒå®‰é™ï¼Œæ¸©åº¦é€‚å®œï¼ˆ18-22â„ƒï¼‰</li>
                <li>ç¡å‰é¿å…ä½¿ç”¨ç”µå­è®¾å¤‡</li>
                <li>ç¡å‰å¯è¿›è¡Œå†¥æƒ³æˆ–æ·±å‘¼å¸ç»ƒä¹ </li>
              </ul>
            </el-col>
            <el-col :xs="24" :md="12">
              <h3>ğŸƒ è¿åŠ¨è°ƒèŠ‚</h3>
              <ul class="lifestyle-list">
                <li>æ¯æ—¥é€‚é‡è¿åŠ¨30åˆ†é’Ÿ</li>
                <li>æ¨èï¼šæ•£æ­¥ã€å¤ªææ‹³ã€ç‘œä¼½</li>
                <li>é¿å…ç¡å‰3å°æ—¶å‰§çƒˆè¿åŠ¨</li>
                <li>è¿åŠ¨ä»¥å¾®æ±—ä¸ºåº¦ï¼Œä¸å®œè¿‡é‡</li>
              </ul>
            </el-col>
          </el-row>
          
          <el-row :gutter="30" style="margin-top: 20px;">
            <el-col :xs="24" :md="12">
              <h3>ğŸ½ï¸ é¥®é£Ÿè°ƒèŠ‚</h3>
              <ul class="lifestyle-list">
                <li>æ™šé¤æ¸…æ·¡ï¼Œç¡å‰3å°æ—¶åœæ­¢è¿›é£Ÿ</li>
                <li>é¿å…å’–å•¡ã€æµ“èŒ¶ã€è¾›è¾£åˆºæ¿€é£Ÿç‰©</li>
                <li>å¯é€‚é‡é£Ÿç”¨å®‰ç¥é£Ÿå“ï¼šçº¢æ£ã€æ¡‚åœ†</li>
                <li>ä¿æŒé¥®é£Ÿè§„å¾‹ï¼Œè¥å…»å‡è¡¡</li>
              </ul>
            </el-col>
            <el-col :xs="24" :md="12">
              <h3>ğŸ˜Œ æƒ…å¿—è°ƒèŠ‚</h3>
              <ul class="lifestyle-list">
                <li>ä¿æŒæƒ…ç»ªç¨³å®šï¼Œé¿å…è¿‡åº¦æ€è™‘</li>
                <li>å­¦ä¼šé‡Šæ”¾å‹åŠ›ï¼Œé€‚æ—¶æ”¾æ¾</li>
                <li>åŸ¹å…»å…´è¶£çˆ±å¥½ï¼Œä¸°å¯Œç²¾ç¥ç”Ÿæ´»</li>
                <li>å¿…è¦æ—¶å¯»æ±‚å¿ƒç†å’¨è¯¢æ”¯æŒ</li>
              </ul>
            </el-col>
          </el-row>
        </el-card>
      </div>

      <!-- é‡è¦æé†’ -->
      <el-alert
        title="âš ï¸ é‡è¦æé†’"
        type="warning"
        :closable="false"
        show-icon
      >
        <template #default>
          <ul>
            <li>æœ¬æ–¹æ¡ˆä»…ä¾›å‚è€ƒï¼Œå…·ä½“ç”¨è¯è¯·å’¨è¯¢ä¸“ä¸šä¸­åŒ»å¸ˆ</li>
            <li>æœè¯è¿‡ç¨‹ä¸­å¦‚æœ‰ä¸é€‚ï¼Œè¯·åŠæ—¶åœè¯å¹¶å°±åŒ»</li>
            <li>å­•å¦‡ã€å“ºä¹³æœŸå¦‡å¥³ã€å„¿ç«¥æ…ç”¨</li>
            <li>å¦‚ç—‡çŠ¶ä¸¥é‡æˆ–æŒç»­ä¸æ”¹å–„ï¼Œè¯·åŠæ—¶å°±åŒ»</li>
          </ul>
        </template>
      </el-alert>

      <!-- æ“ä½œæŒ‰é’® -->
      <div class="action-buttons">
        <el-button size="large" @click="goBack">
          <el-icon><ArrowLeft /></el-icon>
          è¿”å›è¯Šæ–­
        </el-button>
        <el-button type="primary" size="large" @click="downloadPrescription">
          <el-icon><Download /></el-icon>
          ä¸‹è½½å¤„æ–¹
        </el-button>
        <el-button size="large" @click="goToConsultation">
          <el-icon><Refresh /></el-icon>
          é‡æ–°é—®è¯Š
        </el-button>
      </div>
    </el-card>
  </div>
</template>

<script setup>
import { ref } from 'vue'
import { useRouter } from 'vue-router'
import { Medicine, Grape, Connection, Bowl, Sunny, ArrowLeft, Download, Refresh } from '@element-plus/icons-vue'
import { ElMessage } from 'element-plus'

const router = useRouter()

// ä¸­è¯æ–¹å‰‚æ•°æ®
const herbalFormula = ref([
  { herb: 'é»„è¿', dosage: '6g', effects: 'æ¸…å¿ƒç«ï¼Œç‡¥æ¹¿è§£æ¯’' },
  { herb: 'é˜¿èƒ¶', dosage: '9g', effects: 'æ»‹é˜´æ¶¦ç‡¥ï¼Œè¡¥è¡€æ­¢è¡€' },
  { herb: 'ç™½èŠ', dosage: '12g', effects: 'å…»è¡€æ•›é˜´ï¼ŒæŸ”è‚æ­¢ç—›' },
  { herb: 'é»„èŠ©', dosage: '9g', effects: 'æ¸…çƒ­ç‡¥æ¹¿ï¼Œæ³»ç«è§£æ¯’' },
  { herb: 'é¸¡å­é»„', dosage: '2æš', effects: 'æ»‹é˜´æ¶¦ç‡¥ï¼Œå®å¿ƒå®‰ç¥' },
  { herb: 'é…¸æ£ä»', dosage: '15g', effects: 'å…»å¿ƒå®‰ç¥ï¼Œæ•›æ±—' },
  { herb: 'é¾™éª¨', dosage: '15g', effects: 'é•‡å¿ƒå®‰ç¥ï¼Œæ”¶æ•›å›ºæ¶©' }
])

// é£Ÿç–—æ–¹æ¡ˆæ•°æ®
const dietRecipes = ref([
  {
    name: 'ç™¾åˆè²å­ç²¥',
    icon: 'ğŸš',
    ingredients: 'ç™¾åˆ30gã€è²å­30gã€å¤§ç±³100g',
    method: 'å…ˆç…®è²å­è‡³è½¯ï¼Œå†åŠ ç™¾åˆå’Œå¤§ç±³ç…®ç²¥',
    usage: 'æ™šé¤æˆ–ç¡å‰æ¸©æœ',
    effects: 'å…»å¿ƒå®‰ç¥ï¼Œæ¶¦è‚ºæ­¢å’³'
  },
  {
    name: 'é…¸æ£ä»èŒ¶',
    icon: 'ğŸµ',
    ingredients: 'é…¸æ£ä»15gã€é¾™çœ¼è‚‰10g',
    method: 'å¼€æ°´å†²æ³¡ï¼Œç„–10åˆ†é’Ÿå³å¯',
    usage: 'ç¡å‰1å°æ—¶é¥®ç”¨',
    effects: 'å®å¿ƒå®‰ç¥ï¼Œå…»è¡€æ¶¦ç‡¥'
  },
  {
    name: 'é“¶è€³é›ªæ¢¨æ±¤',
    icon: 'ğŸ',
    ingredients: 'é“¶è€³10gã€é›ªæ¢¨1ä¸ªã€å†°ç³–é€‚é‡',
    method: 'é“¶è€³æ³¡å‘ï¼Œä¸é›ªæ¢¨åŒç…®è‡³è½¯çƒ‚',
    usage: 'æ¯æ—¥åˆåé¥®ç”¨',
    effects: 'æ»‹é˜´æ¶¦è‚ºï¼Œæ¸…çƒ­å®‰ç¥'
  }
])

const goBack = () => {
  router.go(-1)
}

const goToConsultation = () => {
  router.push('/consultation')
}

const downloadPrescription = () => {
  ElMessage.success('å¤„æ–¹ä¸‹è½½åŠŸèƒ½å¼€å‘ä¸­...')
}
</script>

<style scoped>
.prescription {
  max-width: 1200px;
  margin: 0 auto;
}

.prescription-card {
  margin-bottom: 20px;
}

.card-header {
  display: flex;
  align-items: center;
  font-size: 18px;
  font-weight: bold;
}

.card-header .el-icon {
  margin-right: 8px;
  font-size: 20px;
}

.syndrome-summary {
  margin-bottom: 30px;
}

.treatment-section {
  margin-bottom: 40px;
}

.section-title {
  display: flex;
  align-items: center;
  color: #2c3e50;
  margin-bottom: 20px;
  font-size: 20px;
}

.section-title .el-icon {
  margin-right: 8px;
  font-size: 24px;
}

.formula-card {
  margin-bottom: 20px;
}

.formula-card h3 {
  color: #2c3e50;
  margin-bottom: 20px;
  font-size: 18px;
}

.formula-instructions {
  margin-top: 20px;
  padding: 20px;
  background: #f8f9fa;
  border-radius: 8px;
}

.formula-instructions h4 {
  color: #2c3e50;
  margin-bottom: 15px;
}

.formula-instructions ul {
  list-style: none;
  padding: 0;
}

.formula-instructions li {
  margin-bottom: 8px;
  padding-left: 20px;
  position: relative;
}

.formula-instructions li:before {
  content: "â€¢";
  color: #409eff;
  position: absolute;
  left: 0;
}

.therapy-card,
.recipe-card {
  height: 100%;
  margin-bottom: 20px;
}

.therapy-card h3,
.recipe-card h3 {
  color: #2c3e50;
  margin-bottom: 15px;
  text-align: center;
}

.therapy-content,
.recipe-content {
  line-height: 1.8;
}

.therapy-content p,
.recipe-content p {
  margin-bottom: 8px;
}

.lifestyle-card {
  padding: 20px;
}

.lifestyle-card h3 {
  color: #2c3e50;
  margin-bottom: 15px;
}

.lifestyle-list {
  list-style: none;
  padding: 0;
}

.lifestyle-list li {
  margin-bottom: 10px;
  padding-left: 20px;
  position: relative;
  line-height: 1.6;
}

.lifestyle-list li:before {
  content: "âœ“";
  color: #67c23a;
  font-weight: bold;
  position: absolute;
  left: 0;
}

.action-buttons {
  text-align: center;
  padding: 30px 0;
  margin-top: 20px;
}

.action-buttons .el-button {
  margin: 0 10px;
}
</style>